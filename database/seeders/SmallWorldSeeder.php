<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Carbon;

class SmallWorldSeeder extends Seeder
{
    public function run(): void
    {
        $now = Carbon::now();

        $editionId = DB::table('smallworld.editions')->insertGetId([
            'name' => 'Small World Reference Sheet (PDF)',
            'created_at' => $now,
            'updated_at' => $now,
        ]);

        $races = [
            ['name' => 'Амазонки', 'qty' => 15, 'description' => 'Во время завоеваний можно временно использовать ещё 4 амазонки; при перегруппировке эти 4 снимаются с карты, оставляя не менее 1 фишки в регионе.', 'edition_id' => $editionId],
            ['name' => 'Варвары', 'qty' => 14, 'description' => 'Не перегруппировываются в конце хода. Если финальная попытка завоевания не удалась, неиспользованные варвары остаются вне карты до начала следующего хода.', 'edition_id' => $editionId],
            ['name' => 'Культисты', 'qty' => 10, 'description' => 'Помести Великого Древнего в первый завоёванный регион. Регион неуязвим, а соседние регионы атакуются на 1 жетон меньше. В начале своего хода можешь переместить Древнего в другой культистский регион.', 'edition_id' => $editionId],
            ['name' => 'Драконы', 'qty' => 11, 'description' => 'Каждый ход можешь превратить до 3 драконов в летящих драконов до конца хода. Летящие считаются за 2 жетона при атаке/обороне и возвращаются в запас в перегруппировке.', 'edition_id' => $editionId],
            ['name' => 'Дроу', 'qty' => 9, 'description' => 'В конце хода получай 1 монету за каждый регион дроу, который не граничит с регионами соперников.', 'edition_id' => $editionId],
            ['name' => 'Дворфы', 'qty' => 8, 'description' => 'Получай 1 монету за каждую занятую шахту/горнодобывающий регион.', 'edition_id' => $editionId],
            ['name' => 'Эльфы', 'qty' => 11, 'description' => 'Когда эльфийский регион завоёван, потерянный жетон возвращается к тебе в запас, а не сбрасывается.', 'edition_id' => $editionId],
            ['name' => 'Эскарго (улитки)', 'qty' => 11, 'description' => 'В конце хода каждый занятый регион приносит 1 дополнительную монету, если в нём есть ракушка; ракушки ставятся при перегруппировке и повышают оборону на 1.', 'edition_id' => $editionId],
            ['name' => 'Фавны', 'qty' => 18, 'description' => 'Во время перегруппировки возьми 1 нового фавна за каждый активный регион, который ты завоевал в этот ход. Жертвы твоих завоеваний также берут по 1 жетону своей расы из лотка.', 'edition_id' => $editionId],
            ['name' => 'Пламя', 'qty' => 11, 'description' => 'После завоевания региона можешь поджечь соседний регион: он теряет 1 жетон защиты. Пылающий регион приносит +1 монету в конце хода.', 'edition_id' => $editionId],
            ['name' => 'Призраки', 'qty' => 14, 'description' => 'В конце хода получай монеты за регионы с призраками; призраки никогда полностью не исчезают и могут накапливаться, но не могут завоёвывать без активной расы.', 'edition_id' => $editionId],
            ['name' => 'Гули', 'qty' => 10, 'description' => 'В упадке могут продолжать завоевания как активная раса.', 'edition_id' => $editionId],
            ['name' => 'Великаны', 'qty' => 11, 'description' => 'Завоёвывают регионы, соседние с занятым тобой горным регионом, на 1 жетон меньше (минимум 1).', 'edition_id' => $editionId],
            ['name' => 'Гномы', 'qty' => 11, 'description' => 'Во время ходов соперников нельзя использовать расовые, особые силы и места/реликвии, чтобы завоевать гномовский регион.', 'edition_id' => $editionId],
            ['name' => 'Гоблины', 'qty' => 11, 'description' => 'Завоёвывают регионы, занятые племенами в упадке, на 1 жетон меньше (минимум 1).', 'edition_id' => $editionId],
            ['name' => 'Цыгане', 'qty' => 14, 'description' => 'В конце хода можешь снять жетоны из одного или нескольких регионов и получить по 1 монете за каждый покинутый регион.', 'edition_id' => $editionId],
            ['name' => 'Кракен', 'qty' => 10, 'description' => 'Может заходить в моря/озёра/реки; за прибрежные регионы получает +1 монету.', 'edition_id' => $editionId],
            ['name' => 'Лепреконы', 'qty' => 11, 'description' => 'В конце хода клади по горшку с золотом в каждый занятый регион. Соперник, завоевав регион, забирает горшок как монету.', 'edition_id' => $editionId],
            ['name' => 'Личи', 'qty' => 11, 'description' => 'При завоевании можешь превращать сброшенные жетоны соперников в своих скелетов-слуг, добавляя их к запасу до лимита.', 'edition_id' => $editionId],
            ['name' => 'Ящеролюди', 'qty' => 11, 'description' => 'Завоёвывают болотистые/грязевые регионы на 1 жетон меньше. Каждый такой регион приносит +1 монету.', 'edition_id' => $editionId],
            ['name' => 'Затерянные племена', 'qty' => 10, 'description' => 'Нейтральные жетоны на карте. Не выбираются игроками, обороняются как обычные регионы.', 'edition_id' => $editionId],
            ['name' => 'Монстры', 'qty' => 18, 'description' => 'Нейтральные жетоны. При их победе тянется маркер Популярного места/Праведной реликвии для региона.', 'edition_id' => $editionId],
            ['name' => 'Грязевики', 'qty' => 12, 'description' => 'Получают +1 монету за каждый грязевой/болотный регион, который занимают.', 'edition_id' => $editionId],
            ['name' => 'Мумии', 'qty' => 11, 'description' => 'При завоевании противник теряет на 1 жетон больше с региона, чем обычно, из-за проклятия.', 'edition_id' => $editionId],
            ['name' => 'Огры', 'qty' => 14, 'description' => 'Первый регион хода завоёвывают на 2 жетона меньше (минимум 1).', 'edition_id' => $editionId],
            ['name' => 'Орки', 'qty' => 10, 'description' => 'За каждый завоёванный в этот ход регион получай +1 монету.', 'edition_id' => $editionId],
            ['name' => 'Пираты', 'qty' => 9, 'description' => 'Могут высаживаться с моря в любой прибрежный регион, игнорируя смежность, и грабят (+1 монета) при завоевании.', 'edition_id' => $editionId],
            ['name' => 'Пикси', 'qty' => 11, 'description' => 'В перегруппировке должны оставлять по 2 жетона в каждом регионе, но при завоеваниях очень многочисленны.', 'edition_id' => $editionId],
            ['name' => 'Жрицы', 'qty' => 8, 'description' => 'В упадке превращаются в башню: все жетоны собираются в один регион и делают его неуязвимым.', 'edition_id' => $editionId],
            ['name' => 'Пигмеи', 'qty' => 11, 'description' => 'При потере жетонов бросают кубик возмещения и возвращают выпавшее число жетонов из лотка.', 'edition_id' => $editionId],
            ['name' => 'Крысолюди', 'qty' => 13, 'description' => 'Многочисленны, без иных преимуществ.', 'edition_id' => $editionId],
            ['name' => 'Пугала', 'qty' => 11, 'description' => 'В занятые ими поля нельзя входить с помощью некоторых сил и реликвий; дают бонус обороны.', 'edition_id' => $editionId],
            ['name' => 'Полурослики', 'qty' => 11, 'description' => 'Начинают игру с двумя логовами-норы, которые делают регионы неуязвимыми для завоевания.', 'edition_id' => $editionId],
            ['name' => 'Гомункулы', 'qty' => 14, 'description' => 'При каждом завоевании получают 1 жетон из резерва; при потере регионов теряют по одному.', 'edition_id' => $editionId],
            ['name' => 'Люди', 'qty' => 10, 'description' => 'Получают +1 монету за каждый занятой холм/равнину по правилам листа.', 'edition_id' => $editionId],
            ['name' => 'Ледяные ведьмы', 'qty' => 11, 'description' => 'Замораживают соседний регион после завоевания: он требует на 1 жетон больше для атаки соперниками.', 'edition_id' => $editionId],
            ['name' => 'ИГОРы', 'qty' => 11, 'description' => 'Когда твои жетоны сбрасываются, можешь «перешивать» их и возвращать в запас до лимита.', 'edition_id' => $editionId],
            ['name' => 'Железные дворфы', 'qty' => 11, 'description' => 'На шахтах/добыче обороняются на +1 и получают +1 монету.', 'edition_id' => $editionId],
            ['name' => 'Ханы', 'qty' => 11, 'description' => 'Первый захваченный регион каждого хода приносит +2 монеты.', 'edition_id' => $editionId],
            ['name' => 'Кобольды', 'qty' => 20, 'description' => 'Должны атаковать группами не менее чем по 2 жетона; очень многочисленны.', 'edition_id' => $editionId],
            ['name' => 'Падальщики', 'qty' => 12, 'description' => 'Получают по +1 монете за каждый соседний регион в упадке.', 'edition_id' => $editionId],
            ['name' => 'Теневые мимы', 'qty' => 12, 'description' => 'Копируют расовую способность соседней расы до конца хода.', 'edition_id' => $editionId],
            ['name' => 'Грибы', 'qty' => 10, 'description' => 'Лесные/грибные регионы приносят +1 монету и дают +1 к обороне.', 'edition_id' => $editionId],
            ['name' => 'Кустолюди', 'qty' => 11, 'description' => 'Все занятые ими леса/грибные леса становятся неуязвимы к завоеваниям, способностям и реликвиям, даже в упадке.', 'edition_id' => $editionId],
            ['name' => 'Скаги', 'qty' => 11, 'description' => 'Завоёвывают регионы у гор/чёрных гор на 1 жетон меньше.', 'edition_id' => $editionId],
            ['name' => 'Скелеты', 'qty' => 20, 'description' => 'За каждые два региона, завоёванных в этот ход, получай 1 дополнительный жетон скелета из лотка (округляя вниз).', 'edition_id' => $editionId],
            ['name' => 'Пращники', 'qty' => 11, 'description' => 'При финальном броске усиления считают каждый пункт как +2 вместо +1.', 'edition_id' => $editionId],
            ['name' => 'Колдуны', 'qty' => 18, 'description' => 'Могут «превращать» одиночные жетоны соседних рас в своих колдунов раз за ход.', 'edition_id' => $editionId],
            ['name' => 'Паучихи', 'qty' => 11, 'description' => 'Могут атаковать через паутинные мосты между регионами, игнорируя смежность.', 'edition_id' => $editionId],
            ['name' => 'Грозовые великаны', 'qty' => 10, 'description' => 'При атаке с гор кидают молнии и завоёвывают на 1 жетон меньше соседние регионы.', 'edition_id' => $editionId],
            ['name' => 'Тритоны', 'qty' => 11, 'description' => 'Все прибрежные регионы завоёвывают на 1 жетон меньше (минимум 1).', 'edition_id' => $editionId],
            ['name' => 'Тролли', 'qty' => 10, 'description' => 'Ставят тролльи логова в занятые регионы (+1 к обороне); логова снимаются при уходе или потере региона.', 'edition_id' => $editionId],
            ['name' => 'Вендиго', 'qty' => 17, 'description' => 'Раз в ход можешь очистить соседний лес, удалив оттуда все жетоны; в следующий ход лес вновь доступен для завоеваний.', 'edition_id' => $editionId],
            ['name' => 'Белые дамы', 'qty' => 7, 'description' => 'В упадке становятся неуязвимыми. Их регионы нельзя завоевать, пока они в упадке.', 'edition_id' => $editionId],
            ['name' => 'Блуждающие огни', 'qty' => 11, 'description' => 'Можно кидать кубик подкрепления до атаки кристального/магического региона или региона рядом с таковым, который ты держишь. Должен атаковать, если хватило жетонов.', 'edition_id' => $editionId],
            ['name' => 'Мастера', 'qty' => 10, 'description' => 'За каждый занятый магический источник/кристальный регион получай +1 монету.', 'edition_id' => $editionId],
        ];

        foreach ($races as &$r) {
            $r['image'] = null;
            $r['created_at'] = $now;
            $r['updated_at'] = $now;
        }
        unset($r);

        DB::table('smallworld.races')->insert($races);

        $abilities = [
            ['name' => 'Авантюрные', 'qty' => 0, 'description' => 'В конце хода получай по 1 монете за каждый занятый регион с Популярным местом.'],
            ['name' => 'Воздушные', 'qty' => 0, 'description' => 'Завоевания стоят на 2 жетона меньше (минимум 1).'],
            ['name' => 'Алхимики', 'qty' => 0, 'description' => 'Каждый ход, пока жетоны на карте, получай +2 монеты.'],
            ['name' => 'Водные', 'qty' => 0, 'description' => 'За каждый прибрежный регион +1 монета; за не прибрежный — на 1 монету меньше обычного.'],
            ['name' => 'Баррикадные', 'qty' => 0, 'description' => 'Если в конце хода у тебя 4 региона или меньше, получай +3 монеты.'],
            ['name' => 'Бегемот', 'qty' => 0, 'description' => 'У тебя 2 стопки жетонов Бегемота, каждая равна числу занятых болот/грязей; жетоны Бегемота считаются как жетоны расы при атаке/обороне и требуют сопровождения 1 жетоном расы.'],
            ['name' => 'Берсерки', 'qty' => 0, 'description' => 'Перед каждой атакой кидай кубик подкрепления и добавляй выпавшее значение как дополнительные жетоны.'],
            ['name' => 'Лагерующие', 'qty' => 0, 'description' => 'Раз за ход можешь поставить лагерь в регионе: +1 к обороне и +1 монета за лагерь, пока активны.'],
            ['name' => 'Катапульта', 'qty' => 0, 'description' => 'Размещай катапульту и можешь атаковать любой регион на карте из этого региона; регион с катапультой неуязвим к некоторым эффектам.'],
            ['name' => 'Десантники', 'qty' => 0, 'description' => 'Все атаки требуют на 1 жетон меньше (минимум 1).'],
            ['name' => 'Подражатели', 'qty' => 0, 'description' => 'Копируй особую силу соседней активной расы до твоего следующего хода.'],
            ['name' => 'Коррумпированные', 'qty' => 0, 'description' => 'В конце хода возьми по 1 монете с каждого соперника.'],
            ['name' => 'Проклятые', 'qty' => 0, 'description' => 'При выборе этой комбинации заплати банкe 3 монеты; иначе сила без эффекта.'],
            ['name' => 'Дипломаты', 'qty' => 0, 'description' => 'В конце хода выбирай одного соперника: он не может атаковать тебя до твоего следующего хода.'],
            ['name' => 'Повелители дракона', 'qty' => 0, 'description' => 'Можно держать дракона: регион с драконом неуязвим; дракон позволяет захватывать соседний регион.'],
            ['name' => 'Исследователи', 'qty' => 0, 'description' => 'В конце хода получай монеты по меньшему из: число наземных регионов или число регионов на небесных островах.'],
            ['name' => 'Огненные шары', 'qty' => 0, 'description' => 'В перегруппировке получай по огненному шару за магический/кристальный регион. Шар даёт силу 2 при атаке и затем сбрасывается.'],
            ['name' => 'Рыбаки', 'qty' => 0, 'description' => 'За каждую пару соседних прибрежных регионов получай +1 монету.'],
            ['name' => 'Стая', 'qty' => 0, 'description' => 'Если все твои занятые регионы образуют одну связную область, получай +2 монеты.'],
            ['name' => 'Летающие', 'qty' => 0, 'description' => 'Можешь атаковать любой регион, кроме морей/озёр/рек, игнорируя смежность.'],
            ['name' => 'Лесные', 'qty' => 0, 'description' => 'За каждый занятый лес/грибной лес получай +1 монету.'],
            ['name' => 'Укреплённые', 'qty' => 0, 'description' => 'Раз за ход ставь крепость в регионе: +1 к обороне и +1 монета за каждую крепость (пока активны).'],
            ['name' => 'Громилы', 'qty' => 0, 'description' => 'Можешь игнорировать 1 дополнительный жетон в обороне цели при атаке.'],
            ['name' => 'Имперские', 'qty' => 0, 'description' => 'В конце хода получай +1 монету за каждый занятый регион.'],
            ['name' => 'Бессмертные', 'qty' => 0, 'description' => 'Сброшенные жетоны возвращаются в твой запас в конце хода.'],
            ['name' => 'Катапультирование', 'qty' => 0, 'description' => 'Можешь перемещать жетоны через одну реку/преграду при атаке.'],
            ['name' => 'Геройские', 'qty' => 0, 'description' => 'Два героя ставятся в твои регионы: каждый добавляет +1 к обороне и делает регион неуязвимым к некоторым эффектам.'],
            ['name' => 'Холмы', 'qty' => 0, 'description' => 'За каждый занятый холм получай +1 монету.'],
            ['name' => 'Историки', 'qty' => 0, 'description' => 'Каждый раз, когда раса уходит в упадок, получай +1 монету.'],
            ['name' => 'Полчища', 'qty' => 0, 'description' => 'Возьми 2 дополнительных жетона в начале завоеваний; они уходят в конце перегруппировки.'],
            ['name' => 'Иммунитет', 'qty' => 0, 'description' => 'Выбранный тип региона становится неуязвимым для некоторых эффектов, пока ты его держишь.'],
            ['name' => 'Наёмники', 'qty' => 0, 'description' => 'Плати 1 монету, чтобы уменьшить цену завоевания на 2 жетона (минимум 1).'],
            ['name' => 'Купцы', 'qty' => 0, 'description' => '+1 монета за каждый занятый регион.'],
            ['name' => 'Верховые', 'qty' => 0, 'description' => 'Равнины/холмы завоёвываются на 1 жетон меньше.'],
            ['name' => 'Мародёры', 'qty' => 0, 'description' => 'За каждый впервые завоёванный в этот ход регион получай +1 монету.'],
            ['name' => 'Ранцы', 'qty' => 0, 'description' => 'После основного цикла завоеваний можешь провести второй цикл, оставив по 1 жетону в регионах.'],
            ['name' => 'Грабители', 'qty' => 0, 'description' => 'При завоевании каждого региона получай +1 монету.'],
            ['name' => 'Щитоносцы', 'qty' => 0, 'description' => 'В защите все твои регионы требуют на 1 жетон больше для завоевания соперниками.'],
            ['name' => 'Стрелки', 'qty' => 0, 'description' => 'Финальный бросок подкрепления даёт +2 за единицу вместо +1.'],
            ['name' => 'Торгаши', 'qty' => 0, 'description' => 'Раз в ход можешь обменять 2 монеты банка на 1 любую монету у соперника.'],
            ['name' => 'Духовные', 'qty' => 0, 'description' => 'В упадке продолжают приносить монеты как активные.'],
            ['name' => 'Каменные', 'qty' => 0, 'description' => 'Регионы на горах/чёрных горах дают +1 монету и +1 к обороне.'],
            ['name' => 'Проворные', 'qty' => 0, 'description' => 'Можешь объявить упадок в конце хода и всё равно ходить в следующий раунд.'],
            ['name' => 'Болотные', 'qty' => 0, 'description' => 'За каждый занятый болото/грязь +1 монета.'],
            ['name' => 'Воры', 'qty' => 0, 'description' => 'В конце хода возьми по 1 монете из банка за каждого соперника, у которого ты завоевал хотя бы один регион.'],
            ['name' => 'Гробница', 'qty' => 0, 'description' => 'Оставь все жетоны в одном регионе в упадке: он становится очень трудным для захвата.'],
            ['name' => 'Подземные', 'qty' => 0, 'description' => 'Ты проходишь через подземные проходы/чёрные горы как по смежным регионам.'],
            ['name' => 'Вампирские', 'qty' => 0, 'description' => 'При завоевании добавляй по 1 жетону в запас за каждый побеждённый жетон соперника, до лимита.'],
            ['name' => 'Исчезающие', 'qty' => 0, 'description' => 'После перегруппировки сними 1 жетон из каждого твоего региона.'],
            ['name' => 'Мстительные', 'qty' => 0, 'description' => 'Каждый раз, когда соперник завоёвывает твой регион, получай +1 монету.'],
            ['name' => 'Богатые', 'qty' => 0, 'description' => 'В начале твоего первого хода получи +7 монет.'],
            ['name' => 'Оборотни', 'qty' => 0, 'description' => 'Раз за ход объявляй Ночную охоту: все завоевания в этот ход стоят на 1 жетон меньше (минимум 1).'],
            ['name' => 'Мудрые', 'qty' => 0, 'description' => 'За каждый соседний регион соперника получай +1 монету.'],
            ['name' => 'На дирижаблях', 'qty' => 0, 'description' => 'Размести дирижабль и игнорируй смежность для одного направления атак в этот ход.'],
        ];

        foreach ($abilities as &$a) {
            $a['image'] = null;
            $a['edition_id'] = $editionId;
            $a['created_at'] = $now;
            $a['updated_at'] = $now;
        }
        unset($a);

        DB::table('smallworld.abilities')->insert($abilities);
    }
}
